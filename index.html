<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CRM 전략 기획자 | 김현진</title>

<!-- Fonts: LMNT 무드(각진/모던) -->
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet" />

<!-- 3D Graph (검증 호환 버전 고정) -->
<script src="https://unpkg.com/three@0.150.1/build/three.min.js" defer></script>
<script src="https://unpkg.com/3d-force-graph@1.70.12/dist/3d-force-graph.min.js" defer></script>

<style>
:root{
  --bg:#ffffff; --ink:#111; --muted:#666; --line:#ddd; --hover:#f5f5f5; --accent:#111;
  --radius:0; /* 각진 */
  --shadow:0 10px 28px rgba(0,0,0,.06);
}
[data-theme="dark"]{
  --bg:#0c0c0c; --ink:#f6f6f6; --muted:#a0a0a0; --line:#272727; --hover:#141414; --accent:#f6f6f6;
  --shadow:0 10px 28px rgba(255,255,255,.05);
}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--ink);font-family:'Space Grotesk','Noto Sans KR',system-ui,sans-serif;letter-spacing:-.01em;overflow-x:hidden}
a{color:var(--ink);text-decoration:none}
a:hover{text-decoration:underline}

/* NAV */
nav{position:fixed;top:0;left:0;right:0;z-index:1000;height:64px;background:var(--bg);border-bottom:1px solid var(--line);display:flex;align-items:center;justify-content:space-between;padding:0 6vw}
.brand{font-weight:700}
.nav-links{display:flex;gap:28px}
.nav-links a{font-weight:700;position:relative}
.nav-links a.active::after{content:'';position:absolute;left:0;bottom:-8px;height:2px;width:100%;background:var(--accent)}
.theme-toggle{background:none;border:1px solid var(--line);width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer}

/* SECTION */
section{padding:120px 6vw 96px;border-bottom:1px solid var(--line)}
h2{margin:0 0 22px 0;font-size:clamp(26px,3vw,36px);font-weight:800}

/* HERO */
.hero{
  padding-top:calc(120px + 64px);
  min-height:88vh;
  display:grid;
  grid-template-columns:1.3fr 1fr;
  gap:40px;
  align-items:end;
}
@media (max-width:980px){
  .hero{grid-template-columns:1fr}
}

.type-line{
  font-size:clamp(28px,4vw,42px);
  font-weight:900;
  border-right:2px solid var(--ink);
  white-space:nowrap;
  overflow:hidden;
}

.hero-sub{
  color:var(--muted);
  max-width:760px;
  line-height:1.8;
}

.hero-tag{
  display:inline-block;
  margin-top:14px;
  padding:8px 12px;
  background:var(--ink);
  color:var(--bg);
  font-weight:800;
  border:1px solid var(--line);
  border-radius:var(--radius);
}

.hero-img-wrap{
  justify-self:end;
  align-self:center;
  width:min(520px,38vw);
  max-height:none;          /* ✅ 자르지 않음 */
  overflow:visible;         /* ✅ 확대 영역 확보 */
}

.hero-img{
  display:block;
  width:100%;
  height:auto;              
  object-fit:contain;       
  filter:grayscale(100%);
  transition:transform .25s ease, filter .25s ease;
  will-change:transform;     /* ✅ 렌더링 최적화 */
}

/* 데스크톱 전용 Hover 확대 효과 */
@media (hover:hover) and (pointer:fine){
  .hero-img:hover{
    transform:scale(1.05);   /* ✨ 살짝 확대 */
    filter:grayscale(0%);
    transform-origin:center;
  }
}

  
/* 비(숫자 1) — 전역 오버레이 */
.rain{position:fixed;inset:0;width:100vw;height:100vh;pointer-events:none;overflow:hidden;z-index:500}
.drop{position:absolute;top:-10vh;font-weight:900;color:var(--line);opacity:.38;font-size:clamp(12px,1.2vw,18px);line-height:1;animation:fall linear infinite}
@keyframes fall{0%{transform:translateY(0)}100%{transform:translateY(110vh)}}

/* KSA */
.graph-container{width:100%;height:clamp(360px,55vh,560px);border:1px solid var(--line);background:var(--bg);box-shadow:var(--shadow);border-radius:var(--radius);position:relative;overflow:hidden}
.graph-loading{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--muted);font-size:14px}
.ksa-summary{display:grid;grid-template-columns:1fr 1fr;gap:28px;margin-top:28px}
@media (max-width:900px){.ksa-summary{grid-template-columns:1fr}}
.ksa-card{border:1px solid var(--line);padding:20px;background:var(--bg);border-radius:var(--radius)}
.ksa-card h3{margin:0 0 10px 0}

/* PROJECTS (이미지 미리보기 유지) */
.projects-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:24px}
.project{grid-column:span 6;border:1px solid var(--line);padding:18px;background:var(--bg);border-radius:var(--radius);box-shadow:none;transition:transform .15s, box-shadow .15s}
.project:hover{transform:translateY(-2px);box-shadow:var(--shadow)}
@media (max-width:980px){.project{grid-column:1/-1}}
.p-image{width:100%;margin:2px auto 14px auto;aspect-ratio:16/10;border:1px solid var(--line);display:flex;align-items:center;justify-content:center;background:var(--hover);overflow:hidden;position:relative;border-radius:var(--radius)}
.p-image img{width:100%;height:100%;object-fit:cover;display:block;filter:grayscale(100%);transition:filter .25s}
.project:hover .p-image img{filter:grayscale(0%)}
.p-image img[src] + .ph{display:none}
.p-image .ph{position:absolute;left:10px;bottom:10px;font-size:12px;color:var(--muted);background:rgba(255,255,255,.75);padding:5px 7px;border:1px solid var(--line);border-radius:var(--radius)}
/* 이미지 에러 시 프레임 유지 */
.no-image{display:flex}
.no-image img{display:none}
.no-image .ph{display:block}
.meta{color:var(--muted);font-size:.95rem;margin-top:8px}

/* TIMELINE / HOW */
.timeline{border-left:2px solid var(--line);padding-left:24px}
.timeline-item{margin:20px 0}
.timeline-item p{color:var(--muted)}
.how{background:var(--hover)}
.how-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}
.how-card{border:1px solid var(--line);background:var(--bg);padding:20px;border-radius:var(--radius)}
.how-card h4{margin:0 0 10px}

/* CONTACT & FOOTER */
.contact .grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
@media (max-width:820px){.contact .grid{grid-template-columns:1fr}}
.k{color:var(--muted)}
footer{text-align:center;padding:40px 6vw;color:var(--muted);border-top:1px solid var(--line)}

/* 모바일 메뉴(간단) */
.mobile-menu-btn{display:none}
@media (max-width:900px){
  .nav-links{display:none}
  .mobile-menu-btn{display:block;cursor:pointer;border:1px solid var(--line);padding:8px}
  .mobile-nav{position:fixed;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--line);transform:translateY(-100%);transition:transform .2s;z-index:999}
  .mobile-nav.active{transform:translateY(0)}
  .mobile-nav a{display:block;padding:14px 6vw;border-top:1px solid var(--line)}
}
</style>
</head>
<body>

<!-- 전역 비(숫자 1) -->
<div class="rain" id="rain" aria-hidden="true"></div>

<!-- NAV -->
<nav>
  <div class="brand">CRM 전략 기획자</div>
  <div class="nav-links">
    <a href="#home" class="active">Home</a>
    <a href="#about">About</a>
    <a href="#ksa">KSA</a>
    <a href="#projects">Projects</a>
    <a href="#experience">Experience</a>
    <a href="#how">How I Work</a>
    <a href="#contact">Contact</a>
  </div>
  <div style="display:flex;gap:12px;align-items:center">
    <button class="theme-toggle" id="themeToggle" aria-label="다크모드 토글">🌙</button>
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="메뉴">≡</button>
  </div>
</nav>
<div class="mobile-nav" id="mobileNav">
  <a href="#home">Home</a><a href="#about">About</a><a href="#ksa">KSA</a>
  <a href="#projects">Projects</a><a href="#experience">Experience</a>
  <a href="#how">How I Work</a><a href="#contact">Contact</a>
</div>

<!-- HERO -->
<section class="hero" id="home">
  <div>
    <div id="typeTarget" class="type-line" aria-label="CRM 전략 기획자 김현진 입니다."></div>
    <p class="hero-sub">
      데이터로 고객을 이해하고 경험으로 브랜드를 성장시키는 <strong>CRM 전략 기획자 김현진</strong>입니다.<br/>
      고객 여정의 흐름 속에서 문제를 정의하고, 데이터를 통해 설득력 있는 해법을 제시합니다.
    </p>
    <span class="hero-tag">Reading the Flow, Not Just the Numbers</span>
    <p class="hero-sub" style="margin-top:10px">
      CRM은 단순한 리텐션이 아니라, 고객과 브랜드의 관계를 디자인하는 일입니다. 그 여정을 함께합니다.
    </p>
  </div>
  <figure class="hero-img-wrap">
    <!-- 원본 파일명 유지 -->
    <img class="hero-img" src="./hero.png" alt="김현진 프로필" onerror="this.closest('figure').style.display='none'" />
  </figure>
</section>

<!-- ABOUT -->
<section id="about" class="about">
  <h2>About</h2>
  <p><strong>학력:</strong> 관광경영학 학사 (2017.03 ~ 2024.02)</p>
  <p><strong>교내 활동:</strong> 단과 학생회 기획집행부장, 감사위원회 사무위원</p>
  <p><strong>수상:</strong> 한국 스마트 관광콘텐츠 콘테스트 금상, Facebook University 최우수학생상, 아너스클럽 최우수상</p>
  <p class="k"><strong>핵심 소개:</strong> 학부 시절부터 마케팅 데이터와 고객 행동 분석에 집중해 왔으며, 실무 캠페인 기획·분석 경험을 바탕으로
    세그먼트 전략, 리텐션 자동화, 퍼널 전환 최적화 역량을 확보했습니다.</p>
</section>

<!-- KSA -->
<section id="ksa">
  <h2>KSA Graph</h2>
  <p class="k">아래 3D 그래프는 저의 핵심 역량을 지식·기술·역량·경험으로 분해해 보여줍니다. 노드를 클릭하면 관련 프로젝트 카드가 강조됩니다.</p>
  <div id="graph" class="graph-container" role="img" aria-label="KSA 3D Force Graph">
    <div class="graph-loading">3D 그래프 로딩 중...</div>
  </div>

  <div class="ksa-summary">
    <div class="ksa-card">
      <h3># Skills / Certificates</h3>
      <ul>
        <li>Google Analytics Certificate (2023.10)</li>
        <li>사회조사분석사 2급 (SPSS) (2023.09)</li>
        <li>데이터분석준전문가(ADsP) (2023.06)</li>
        <li>컴퓨터 활용능력 2급</li>
        <li>MOS Excel & PowerPoint</li>
      </ul>
    </div>
    <div class="ksa-card">
      <h3># Activities</h3>
      <ul>
        <li>Kb국민은행 디지털 서포터즈 (2021.12 - 2022.03)<br>• 은행 금융 서비스 홍보 콘텐츠 기획 및 현장 서비스</li>
        <li>인천 영 MICE 리더 6기 (2021.06 - 2021.12)<br>• MICE 산업 홍보 프로젝트 기획</li>
        <li>(주)코스콤 시장전략부 사무보조 (2021.06 - 2021.08)<br>• 자사주 데이터 공시 관련 고객사 안내 및 계약 집행</li>
      </ul>
    </div>
  </div>
</section>

<!-- PROJECTS -->
<section id="projects" class="projects">
  <h2>Projects</h2>
  <div class="projects-grid">

    <!-- 1 -->
    <article class="project" data-skill="GA4,세그먼트,퍼널,리텐션">
      <div class="p-image">
        <img src="./img1.png" alt="CRM Funnel Optimization Project" />
        <span class="ph">img1.png</span>
      </div>
      <h3>CRM Funnel Optimization Project</h3>
      <p><strong>P:</strong> 30일 미구매율이 85%로 비정상적으로 높음</p>
      <p><strong>I:</strong> 탐색→장바구니 이탈 집중, 관심-장바구니 불일치 패턴</p>
      <p><strong>A:</strong> 세그먼트 재정의 + 리마케팅 플로우 전면 재설계 + 타이밍 A/B</p>
      <p><strong>R:</strong> 30일 미구매율 <strong>85% → 68%</strong>, 탐→장 전환율 대폭 상승</p>
      <div class="meta">Tech: GA4, Excel, CRM Tool</div>
    </article>

    <!-- 2 -->
    <article class="project" data-skill="자동화,세그먼트,카피,딥링크">
      <div class="p-image">
        <img src="./img2.png" alt="Retention Automation Campaign" />
        <span class="ph">img2.png</span>
      </div>
      <h3>Retention Automation Campaign</h3>
      <p><strong>P:</strong> 재방문→구매 리텐션 루프 약함</p>
      <p><strong>I:</strong> 상태별 니즈 차이/피로도 발생 구간 존재</p>
      <p><strong>A:</strong> 상태 기반 시나리오 자동화, 관심/장바구니 결합 카피 + 딥링크, 빈도 캡핑/롤백 룰</p>
      <p><strong>R:</strong> 객단가 <strong>+59%</strong>, 리텐션 지표 구조적 개선</p>
      <div class="meta">Tech: Kakao Biz, Google Sheets</div>
    </article>

    <!-- 3 -->
    <article class="project" data-skill="리엔게이지,세그먼트,웨이브,저관여">
      <div class="p-image">
        <img src="./img3.png" alt="Funnel Re-engagement Strategy" />
        <span class="ph">img3.png</span>
      </div>
      <h3>Funnel Re-engagement Strategy</h3>
      <p><strong>P:</strong> 180일 이상 장기 휴면 비중 증가</p>
      <p><strong>I:</strong> 장기 휴면군은 직접구매 장벽이 높아 저관여 단계 필요</p>
      <p><strong>A:</strong> 재활성 세그먼트 재정의, 웨이브 설계, 저관여 액션(관심상품/알림) 도입</p>
      <p><strong>R:</strong> 재활성화율 <strong>12.4%</strong>, 이후 코호트 반복 구매율 상승</p>
      <div class="meta">Tech: CRM 데이터 분석, 자동화 리마케팅</div>
    </article>

    <!-- 4 -->
    <article class="project" data-skill="제안서,우선순위,대시보드,경영인사이트">
      <div class="p-image">
        <img src="./img4.png" alt="CRM Proposal Consulting" />
        <span class="ph">img4.png</span>
      </div>
      <h3>CRM Proposal Consulting</h3>
      <p><strong>P:</strong> 경영진 의사결정에 필요한 CRM 성과/전략 우선순위 불명확</p>
      <p><strong>I:</strong> 0~30/30~90/180일+ 구간별 과제 및 리소스 배분 이슈</p>
      <p><strong>A:</strong> 퍼널/미구매율/전환율 통합, 구간별 전술·메시지·리소스 배분안, 대시보드 프로토타입</p>
      <p><strong>R:</strong> 우선순위 명확화, 적용 속도 단축</p>
      <div class="meta">Tech: PowerPoint, GA4</div>
    </article>

    <!-- 5 -->
    <article class="project" data-skill="세분화,KPI,채널믹스,크리에이티브매칭">
      <div class="p-image">
        <img src="./img5.png" alt="Facebook University Honors Project" />
        <span class="ph">img5.png</span>
      </div>
      <h3>Facebook University Honors Project</h3>
      <p><strong>P:</strong> OTT(가상) 초기 구독과 장기 리텐션의 균형</p>
      <p><strong>I:</strong> 퍼널 단계별 CPA/ROAS 목표 재설계 필요</p>
      <p><strong>A:</strong> 세분화 모델 + KPI 재정의, 채널 믹스 최적화, 크리에이티브-세그먼트 매칭</p>
      <p><strong>R:</strong> 최우수상 수상, 도달 대비 전환효율 개선</p>
      <div class="meta">Tech: Facebook Ads, Analytics</div>
    </article>

  </div>
</section>

<!-- EXPERIENCE -->
<section id="experience" class="experience">
  <h2>Experience</h2>
  <div class="timeline">
    <div class="timeline-item">
      <h3>2024.04 – 2025.05 | Snapcompany · Snappush CRM Team</h3>
      <p>자사몰 CRM 캠페인 기획 및 성과 분석. 세그먼트별 리텐션 자동화 구축. 월 1.2억 원 규모 광고비를 집행하며 30개 이상 고객사의 자사몰 CRM 캠페인 기획·성과 분석 주도 </p>
      <p><strong>역할:</strong> 퍼널/세그먼트 설계, 메시지 A/B, 자동화 룰·빈도 캡핑, 대시보드 리포팅</p>
    </div>
    <div class="timeline-item">
      <h3>2022.01 - 2022.07 | Facebook University / Honors Club</h3>
      <p>실무형 마케팅 프로젝트 수행 및 소비자 세분화 모델 구축. OTT 가상 론칭 프로젝트 최우수상.</p>
    </div>
  </div>
</section>

<!-- HOW I WORK -->
<section id="how" class="how">
  <h2>How I Work</h2>
  <div class="how-grid">
    <div class="how-card"><h4>Work Style</h4><p>어려운 상황에서도 긍정적 태도를 유지하고, 문제보다 해결에 집중합니다.</p></div>
    <div class="how-card"><h4>Communication</h4><p>목표 정렬을 우선으로 팀과 적극 소통하며, 협업 속도를 높입니다.</p></div>
    <div class="how-card"><h4>Execution</h4><p>마감 준수와 실행력에 집중하고, 프로세스를 반복 개선합니다.</p></div>
    <div class="how-card"><h4>Responsibility</h4><p>결과 품질과 일관성에 책임을 지고 스스로 점검합니다.</p></div>
    <div class="how-card"><h4>Feedback</h4><p>객관적 피드백을 겸손히 수용하고 다음 스프린트 개선으로 연결합니다.</p></div>
    <div class="how-card"><h4>Growth Mindset</h4><p>배움과 성장을 습관화하여 최선의 결과를 만듭니다.</p></div>
  </div>
</section>

<!-- CONTACT -->
<section id="contact" class="contact">
  <h2>Contact</h2>
  <div class="grid">
    <div><p>새로운 CRM 전략과 성장 기회에 대해 이야기하는 것을 즐깁니다. 편하게 연락 주세요.</p></div>
    <div>
      <p class="k"><strong>Email</strong>  <a href="mailto:boysangme@gmail.com">boysangme@gmail.com</a></p>
      <p class="k"><strong>Instagram</strong>  <a href="https://www.instagram.com/Romanticisman" target="_blank" rel="noopener">@Romanticisman</a></p>
      <p class="k"><strong>Resume</strong>  <a href="./resume.pdf" target="_blank" rel="noopener">resume.pdf</a></p>
    </div>
  </div>
</section>

<footer>© 2025 김현진. All Rights Reserved.</footer>

<script>
/* ===== 테마 토글 ===== */
const body=document.body, themeBtn=document.getElementById('themeToggle');
const initial=localStorage.getItem('theme')||'light'; body.setAttribute('data-theme',initial); themeBtn.textContent=initial==='dark'?'☀️':'🌙';
themeBtn.addEventListener('click',()=>{const next=body.getAttribute('data-theme')==='dark'?'light':'dark'; body.setAttribute('data-theme',next); themeBtn.textContent=next==='dark'?'☀️':'🌙'; localStorage.setItem('theme',next);});

/* ===== 모바일 메뉴 ===== */
const mbBtn=document.getElementById('mobileMenuBtn'), mbNav=document.getElementById('mobileNav');
mbBtn?.addEventListener('click',()=>mbNav.classList.toggle('active'));
mbNav?.querySelectorAll('a').forEach(a=>a.addEventListener('click',()=>mbNav.classList.remove('active')));

/* ===== 네비 활성 상태 & 스크롤 ===== */
function updateActive(){ const secs=document.querySelectorAll('section[id]'); const links=document.querySelectorAll('.nav-links a,.mobile-nav a'); let cur='home';
  secs.forEach(s=>{const top=s.offsetTop-100; if(window.pageYOffset>=top) cur=s.id;});
  links.forEach(l=>{l.classList.toggle('active', l.getAttribute('href')===`#${cur}`);});
}
window.addEventListener('scroll',()=>{updateActive();},{passive:true}); updateActive();

/* ===== Typewriter ===== */
(function(){ const el=document.getElementById('typeTarget'); const text='CRM 전략 기획자 김현진 입니다.'; let i=0; const speed=50;
  function type(){ if(i<=text.length){ el.textContent=text.slice(0,i); i++; setTimeout(type,speed);} else { el.style.borderRight='none'; } }
  setTimeout(type,400);
})();

/* ===== 숫자 1 비 (전체 화면) ===== */
function createGlobalRain(){
  const wrap=document.getElementById('rain'); if(!wrap) return; wrap.innerHTML='';
  const isDark = body.getAttribute('data-theme')==='dark';
  const COUNT = Math.min(isDark?90:110, Math.max(28, Math.floor(window.innerWidth/20)));
  for(let i=0;i<COUNT;i++){
    const s=document.createElement('span'); s.className='drop'; s.textContent='1';
    s.style.left=(Math.random()*100)+'vw';
    s.style.animationDuration=(5+Math.random()*7)+'s';
    s.style.animationDelay=(Math.random()*3)+'s';
    s.style.opacity = isDark ? .28 : .38;
    wrap.appendChild(s);
  }
}
window.addEventListener('load',createGlobalRain);
window.addEventListener('resize',()=>{clearTimeout(window.__rainTimer); window.__rainTimer=setTimeout(createGlobalRain,120);},{passive:true});
themeBtn.addEventListener('click',()=>{setTimeout(createGlobalRain,10);}); // 테마 전환 시 투명도 재적용

/* ===== 이미지 에러 처리: 프레임 유지 + 플레이스홀더 표시 ===== */
document.querySelectorAll('.p-image img').forEach(img=>{
  img.addEventListener('error',()=>{
    const frame=img.parentElement; frame.classList.add('no-image');
    const ph=frame.querySelector('.ph'); if(ph){ ph.textContent='이미지를 불러올 수 없습니다'; }
  }, {once:true});
});

/* ===== KSA 3D Graph: 안전 초기화 ===== */
let graphInstance=null;
function buildKSAData(){
  const categories={Knowledge:'#111',Skills:'#333',Abilities:'#555',Experience:'#777'};
  const dataMap={
    Knowledge:['CRM 전략','세그먼트 전략','퍼널 분석','리텐션 마케팅','LTV 관리','GA4 분석'],
    Skills:['GA4','Excel','SQL','Notion','Kakao Biz'],
    Abilities:['문제 정의력','데이터 스토리텔링','가설 검증','협업 리더십','빠른 실행력'],
    Experience:['캠페인 운영','리포트 작성','CRM 제안서','세그먼트 기획']
  };
  const g={nodes:[],links:[]}; let id=0;
  Object.entries(dataMap).forEach(([cat,items])=>items.forEach(n=>g.nodes.push({id:id++,name:n,group:cat,color:categories[cat]})));
  g.nodes.forEach(n=>{ if(Math.random()>.45){ const t=g.nodes[Math.floor(Math.random()*g.nodes.length)].id; if(t!==n.id) g.links.push({source:n.id,target:t}); }});
  return g;
}
function waitForGraphReady(cb){
  const el=document.getElementById('graph');
  if(!window.ForceGraph3D || !el){ return setTimeout(()=>waitForGraphReady(cb),120); }
  const r=el.getBoundingClientRect(); if(!r.width||!r.height){ return setTimeout(()=>waitForGraphReady(cb),120); }
  cb(el);
}
function initKSAGraph(){
  waitForGraphReady((el)=>{
    try{
      el.querySelector('.graph-loading')?.remove();
      const data=buildKSAData();
      const bg=getComputedStyle(document.documentElement).getPropertyValue('--bg').trim()||'#ffffff';

      const Graph=window.ForceGraph3D()(el)
        .graphData(data)
        .backgroundColor(bg)
        .nodeLabel(n=>`${n.group}: ${n.name}`)
        .nodeColor(n=>n.color)
        .nodeResolution(16)
        .linkOpacity(0.25)
        .linkWidth(2)
        .onNodeHover(n=>{ el.style.cursor=n?'pointer':'default'; })
        .onNodeClick(n=>highlightProjectBySkill(n?.name));

      function fit(){ const r=el.getBoundingClientRect(); Graph.width(r.width); Graph.height(r.height); }
      window.addEventListener('resize',fit,{passive:true}); fit(); setTimeout(fit,0);

      const renderer=Graph.renderer?.(); if(renderer?.setPixelRatio){ renderer.setPixelRatio(Math.min(window.devicePixelRatio||1,1.75)); }
      document.addEventListener('visibilitychange',()=>{ Graph.pauseAnimation(document.hidden); if(!document.hidden) setTimeout(fit,60); });

      graphInstance=Graph;
      console.log('KSA 3D 그래프 초기화 완료');
    }catch(e){
      console.error('KSA 그래프 오류:',e);
      el.innerHTML='<div class="graph-loading">그래프 로딩에 실패했습니다. 새로고침 해주세요.</div>';
    }
  });
}
window.addEventListener('load',initKSAGraph);

/* 노드 클릭 → 관련 프로젝트 카드 강조 */
function highlightProjectBySkill(skill){
  if(!skill) return;
  const cards=[...document.querySelectorAll('.project')];
  cards.forEach(c=>c.style.boxShadow='none');
  const m=cards.find(c=>(c.dataset.skill||'').includes(skill));
  if(m){ m.style.boxShadow='inset 0 0 0 2px var(--accent)'; m.scrollIntoView({behavior:'smooth',block:'center'}); setTimeout(()=>m.style.boxShadow='none',1600); }
}

/* 내부 앵커 스무스 스크롤(헤더 높이 보정) */
document.querySelectorAll('a[href^="#"]').forEach(a=>{
  a.addEventListener('click',e=>{
    const t=document.querySelector(a.getAttribute('href')); if(!t) return;
    e.preventDefault(); window.scrollTo({top:t.offsetTop-64,behavior:'smooth'});
  });
});
</script>
</body>
</html>



